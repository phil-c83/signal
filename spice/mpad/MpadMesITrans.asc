Version 4
SHEET 1 1212 916
WIRE -240 -192 -336 -192
WIRE 256 -192 160 -192
WIRE -336 -176 -336 -192
WIRE -240 -176 -240 -192
WIRE 160 -176 160 -192
WIRE 256 -176 256 -192
WIRE -1520 0 -1520 -16
WIRE -1472 0 -1520 0
WIRE -1408 0 -1408 -16
WIRE -1408 0 -1472 0
WIRE -1472 16 -1472 0
WIRE -864 208 -864 128
WIRE -528 208 -608 208
WIRE -416 208 -416 160
WIRE -704 240 -784 240
WIRE -608 240 -608 208
WIRE -608 240 -704 240
WIRE -272 256 -320 256
WIRE -240 256 -272 256
WIRE -160 256 -240 256
WIRE -160 272 -160 256
WIRE 0 272 -160 272
WIRE 544 288 400 288
WIRE 224 320 160 320
WIRE 752 336 704 336
WIRE -864 352 -864 272
WIRE -416 352 -416 304
WIRE -160 464 -160 272
WIRE 400 464 400 288
WIRE 400 464 -160 464
WIRE -656 672 -848 672
WIRE -848 736 -848 672
WIRE -784 736 -848 736
WIRE -656 752 -720 752
WIRE -544 752 -656 752
WIRE -464 752 -544 752
WIRE -848 768 -848 736
WIRE -784 768 -816 768
WIRE -816 800 -816 768
WIRE -224 800 -256 800
FLAG -1472 16 0
FLAG -1408 -96 1.65V
FLAG -1520 -96 3.3V
FLAG -528 304 1.65V
FLAG -416 160 3.3V
FLAG -416 352 0
FLAG -240 336 0
FLAG 160 256 3.3V
FLAG 160 288 0
FLAG 224 400 0
FLAG 0 304 1.65V
FLAG 752 416 0
FLAG 704 272 3.3V
FLAG 704 304 0
FLAG 544 320 1.65V
FLAG -752 784 0
FLAG -752 720 3.3V
FLAG -816 800 1.65V
FLAG 752 336 Vpb2
FLAG -928 672 Vpb1
FLAG -928 768 Vpb2
FLAG -1520 192 Sig_coil
FLAG -1520 272 1.65V
FLAG -944 224 1.65V
FLAG -944 256 Sig_coil
FLAG -864 128 3.3V
FLAG -864 352 0
FLAG -704 240 Vint
FLAG -464 784 1.65V
FLAG -256 736 3.3V
FLAG -256 768 0
FLAG -224 880 0
FLAG -272 256 Vsb
FLAG 224 320 Vpb1
FLAG -544 752 Vadd
FLAG -336 -96 1.65V
FLAG -240 -96 0
FLAG 160 -96 1.65V
FLAG 256 -96 0
SYMBOL voltage -1520 -112 R0
WINDOW 3 -63 102 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value 3.3V
SYMATTR InstName V1
SYMBOL voltage -1408 -112 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value 1.65V
SYMBOL band-reject-SUB -432 256 R0
WINDOW 39 -30 148 Bottom 2
SYMATTR SpiceLine Q=5 F0=Fm C=220n
SYMATTR InstName X2
SYMBOL res -256 240 R0
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL MFB-BandPass-SUB 80 288 R0
WINDOW 39 -1 -95 Bottom 2
SYMATTR SpiceLine C1=470n C2=100n Q=4 K=20 F0=25
SYMATTR InstName X1
SYMBOL res 208 304 R0
SYMATTR InstName R1
SYMATTR Value 10K
SYMBOL MFB-BandPass-SUB 624 304 R0
WINDOW 39 -23 -94 Bottom 2
SYMATTR SpiceLine C1=100n C2=47n Q=4 K=20 F0=75
SYMATTR InstName X3
SYMBOL res 736 320 R0
SYMATTR InstName R3
SYMATTR Value 10K
SYMBOL Opamps\\UniversalOpamp2 -752 752 R0
SYMATTR InstName U1
SYMBOL res -832 656 R90
WINDOW 0 2 62 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL res -832 752 R90
WINDOW 0 2 54 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL res -672 656 R0
SYMATTR InstName R6
SYMATTR Value 22k
SYMBOL bv -1520 176 R0
WINDOW 3 -213 172 Left 2
SYMATTR Value V=sig_coil(time,Fm,Fm/2,100,2.3*sqrt(2),M) + ddt(20*white(1000*time)*M)
SYMATTR InstName B4
SYMBOL integrateur-SUB -880 240 R0
WINDOW 39 2 167 Bottom 2
SYMATTR SpiceLine C1=100n Fc=5 K=10
SYMATTR InstName X4
SYMBOL VCVS-LowPass-ButterworthNoGain-SUB -368 768 R0
WINDOW 39 15 -94 Bottom 2
SYMATTR SpiceLine Fc=100 C2=100n C1=47n
SYMATTR InstName X5
SYMBOL res -240 784 R0
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL bv -336 -192 R0
WINDOW 3 -162 195 Left 2
SYMATTR Value V=sig_rx(time,Fm,Fm/2,sqrt(2))
SYMATTR InstName B1
SYMBOL res -256 -192 R0
SYMATTR InstName R8
SYMATTR Value 10k
SYMBOL bv 160 -192 R0
WINDOW 3 -162 195 Left 2
SYMATTR Value V=white(1000*time)
SYMATTR InstName B2
SYMBOL res 240 -192 R0
SYMATTR InstName R9
SYMATTR Value 10k
TEXT -992 -56 Left 2 !.param Fm=50 M=220e-9
TEXT -992 -80 Left 2 !.inc spice_func.txt
TEXT -1584 40 Left 2 !.tran 0 1.1 0
TEXT -1712 536 Left 2 !.meas tran X4R2 param (V(Vint)-V(X4:N001))/I(x4:R2)\n.meas tran X4R1 param (V(Sig_coil)-V(X4:N001))/I(x4:R1)
TEXT -1728 648 Left 2 !.meas tran X2R1 param (V(Vint)-V(X2:N003))/I(X2:R1)\n.meas tran X2R2 param (V(X2:N003)-V(X2:N002))/I(X2:R2)\n.meas tran X2R3 param (V(Vsb)-V(X2:N001))/I(X2:R3)
TEXT -160 536 Left 2 !.meas tran X1R1 avg (V(vsb)-V(X1:N001))/I(X1:R1)\n.meas tran X1R2 avg (V(X1:N001)-V(1.65V))/I(X1:R2)\n.meas tran X1R3 avg (V(Vpb1)-V(X1:N002))/I(X1:R3)
TEXT 520 528 Left 2 !.meas tran X3R1 avg (V(vsb)-V(X3:N001))/I(X3:R1)\n.meas tran X3R2 avg (V(X3:N001)-V(1.65V))/I(X3:R2)\n.meas tran X3R3 avg (V(Vpb2)-V(X3:N002))/I(X3:R3)
TEXT -64 752 Left 2 !.meas tran X5R1 param (V(Vadd)-V(X5:N001))/I(X5:R1)\n.meas tran X5R2 param (V(X5:N002)-V(X5:N001))/I(X5:R2)
